<!DOCTYPE html>
<html>
  <head>
    <title>Reviews</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h2>Leave a Review</h2>
    <form id="reviewForm">
      <label>Appointment ID:</label>
      <input type="number" id="appointmentId" required /><br />
      <label>Rating (1-5):</label>
      <input type="number" id="rating" min="1" max="5" required /><br />
      <label>Comment:</label>
      <textarea id="comment"></textarea><br />
      <button type="submit">Submit Review</button>
    </form>
    <script>
      document
        .getElementById('reviewForm')
        .addEventListener('submit', async (e) => {
          e.preventDefault();
          const token = localStorage.getItem('token');
          const appointmentId = document.getElementById('appointmentId').value;
          const rating = document.getElementById('rating').value;
          const comment = document.getElementById('comment').value;
          try {
            const res = await axios.post(
              '/api/reviews',
              { appointmentId, rating, comment },
              {
                headers: {
                  'Content-Type': 'application/json',
                  Authorization: 'Bearer ' + token,
                },
              }
            );
            alert(res.data.message || 'Review submitted');
          } catch (error) {
            console.error(error);
            alert('Review submission failed');
          }
        });
    </script>
  </body>
</html>
